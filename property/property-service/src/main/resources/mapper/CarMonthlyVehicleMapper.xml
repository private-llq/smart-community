<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jsy.community.mapper.CarMonthlyVehicleMapper">


    <select id="FindByMultiConditionPage" resultType="com.baomidou.mybatisplus.core.metadata.IPage">
        SELECT cm.* FROM t_car_monthly_vehicle as cm
        <where>
            <if test="query.communityId!=null and query.communityId!=''">
                AND cm.community_id = #{query.communityId}
            </if>
            <if test="query.carNumber!=null and query.carNumber!=''">
                AND cm.car_number = #{query.carNumber}
            </if>
            <if test="query.ownerName!=null and query.ownerName!=''">
                AND cm.owner_name = #{query.ownerName}
            </if>
            <if test="query.phone!=null and query.phone!=''">
                AND cm.phone = #{query.phone}
            </if>
            <if test="query.monthlyMethod!=null and query.monthlyMethod!=''">
                AND cm.monthly_method = #{query.monthlyMethod}
            </if>
            <if test="query.expirationStatus =='0'.toString() ">
                AND cm.end_time &lt; now()
            </if>

            <if test="query.expirationStatus =='1'.toString() ">
                AND cm.end_time &gt; now()
            </if>

            <if test="query.carPosition!=null and query.carPosition!=''">
                AND cp.car_osition = #{query.carPosition}
            </if>
        </where>
    </select>
</mapper>